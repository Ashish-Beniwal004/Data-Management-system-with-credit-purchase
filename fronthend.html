<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Retail Loan & Inventory â€” Frontend</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="styles.css">
  
</head>
<body>

<div class="d-flex">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="mb-4">
      <h5 class="mb-0">Retail Loan Inventory</h5>
      <small class="text-muted">Admin Dashboard</small>
    </div>

    <nav class="nav flex-column gap-1">
      <a class="nav-link active" href="#" data-target="dashboard"><i class="bi bi-bar-chart-line me-2"></i> Dashboard</a>
      <a class="nav-link" href="#" data-target="customers"><i class="bi bi-people me-2"></i> Customers</a>
      <a class="nav-link" href="#" data-target="suppliers"><i class="bi bi-truck me-2"></i> Suppliers</a>
      <a class="nav-link" href="#" data-target="products"><i class="bi bi-box-seam me-2"></i> Products</a>
      <a class="nav-link" href="#" data-target="stock"><i class="bi bi-stack me-2"></i> Stock</a>
      <a class="nav-link" href="#" data-target="sales"><i class="bi bi-receipt me-2"></i> Sales</a>
      <a class="nav-link" href="#" data-target="invoices"><i class="bi bi-file-text me-2"></i> Invoices</a>
      <a class="nav-link" href="#" data-target="loans"><i class="bi bi-cash-stack me-2"></i> Loans</a>
      <a class="nav-link" href="#" data-target="payments"><i class="bi bi-credit-card me-2"></i> Payments</a>
    </nav>

    <hr>
    <div class="mt-3">
      <small class="muted">Quick Actions</small>
      <div class="d-grid gap-2 mt-2">
        <button class="btn btn-outline-primary btn-sm" id="addQuickCustomer">+ New Customer</button>
        <button class="btn btn-outline-success btn-sm" id="addQuickProduct">+ New Product</button>
      </div>
    </div>
  </aside>

  <!-- Main content -->
  <div class="flex-fill">
    <main>
      <!-- Dashboard -->
      <section id="dashboard" class="view">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            <h4 class="mb-0">Dashboard</h4>
            <small class="muted">Overview of business KPIs</small>
          </div>
          <div class="d-flex gap-2">
            <input class="form-control form-control-sm search-input" id="globalSearch" placeholder="Search across current view...">
            <button class="btn btn-outline-secondary btn-sm" id="refreshBtn"><i class="bi bi-arrow-clockwise"></i></button>
          </div>
        </div>

        <div class="row g-3 mb-4">
          <div class="col-sm-6 col-md-3">
            <div class="p-3 card-soft">
              <small class="muted">Total Customers</small>
              <div class="h4 mt-2" id="cardCustomers">0</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-3">
            <div class="p-3 card-soft">
              <small class="muted">Total Products</small>
              <div class="h4 mt-2" id="cardProducts">0</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-3">
            <div class="p-3 card-soft">
              <small class="muted">Total Loans</small>
              <div class="h4 mt-2" id="cardLoans">0</div>
            </div>
          </div>
          <div class="col-sm-6 col-md-3">
            <div class="p-3 card-soft">
              <small class="muted">Pending Payments</small>
              <div class="h4 mt-2" id="cardPending">0</div>
            </div>
          </div>
        </div>

        <div class="row g-3">
          <div class="col-lg-6">
            <div class="card-soft p-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <strong>Monthly Sales</strong>
                <small class="muted">Last 6 months</small>
              </div>
              <canvas id="salesChart" height="150"></canvas>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="card-soft p-3 mb-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <strong>Loan Repayments</strong>
                <small class="muted">Monthly</small>
              </div>
              <canvas id="loanChart" height="150"></canvas>
            </div>

            <div class="card-soft p-3 mt-3">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <strong>Stock Updates</strong>
                <small class="muted">Recent</small>
              </div>
              <canvas id="stockChart" height="80"></canvas>
            </div>
          </div>
        </div>
      </section>

      <!-- Generic Table template for CRUD views -->
      <template id="crud-template">
        <div class="card-soft p-3">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <div>
              <h5 class="mb-0" data-title></h5>
              <small class="muted" data-sub></small>
            </div>
            <div class="d-flex gap-2 align-items-center">
              <input class="form-control form-control-sm search-input" placeholder="Search table..." data-search>
              <button class="btn btn-primary btn-sm" data-add>+ Add</button>
            </div>
          </div>
          <div class="table-wrap">
            <table class="table table-hover align-middle mb-0">
              <thead class="table-light">
                <tr data-headers></tr>
              </thead>
              <tbody data-body></tbody>
            </table>
          </div>
        </div>
      </template>

      <!-- Customers -->
      <section id="customers" class="view" style="display:none">
        <!-- Content injected by JS -->
      </section>

      <!-- Suppliers -->
      <section id="suppliers" class="view" style="display:none"></section>

      <!-- Products -->
      <section id="products" class="view" style="display:none"></section>

      <!-- Stock -->
      <section id="stock" class="view" style="display:none"></section>

      <!-- Sales -->
      <section id="sales" class="view" style="display:none"></section>

      <!-- Invoices -->
      <section id="invoices" class="view" style="display:none"></section>

      <!-- Loans -->
      <section id="loans" class="view" style="display:none"></section>

      <!-- Payments -->
      <section id="payments" class="view" style="display:none"></section>

    </main>
  </div>
</div>

<!-- Modal: Generic Add/Edit (dynamic fields) -->
<div class="modal fade" id="entityModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <form class="modal-content" id="entityForm" novalidate>
      <div class="modal-header">
        <h5 class="modal-title" id="entityModalTitle">Add Item</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div id="modalFields" class="row g-3"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-sm btn-primary">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Toast area -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index:1100">
  <div id="toastContainer"></div>
</div>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script src="script.js"></script> 
</body>
</html>